<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Panel de Filtros</title>

  <!-- üîπ Favicon actualizado -->
  <link rel="icon" type="image/png" href="https://i.imgur.com/yoRQedb.png">
  <link rel="shortcut icon" type="image/png" href="https://i.imgur.com/yoRQedb.png">

  <style>
    /* ----------- REGLAS DE FUENTE ----------- */
    html, body {
      font-family: "Segoe UI", sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }

    *{
      box-sizing: border-box;
      margin:0;
      padding:0;
    }

    body{ display:flex; height:100vh; background:#f3f3f3; }

    /* ---------- LEFT SIDEBAR ---------- */
    .sidebar-left{
      width:260px;
      background:#e4e2d3;
      border-right:1px solid #ccc;
      display:flex;
      flex-direction:column;
      overflow-y:auto;
    }

    .sidebar-left h2{
      padding:15px;
      font-size:20px;
      font-weight:600;
      border-bottom:1px solid #ccc;
      background:#e4e2d3;
      color:#2b5329;
      position:sticky;
      top:0;
      z-index:5;
    }

    .sidebar-left .filtro-principal{
      font-weight:600;
      padding:12px;
      background:#e4e2d3;
      border-bottom:1px solid #ddd;
      cursor:pointer;
      user-select:none;
      font-size:11px;
      line-height:1.4;
      letter-spacing: .1px;
    }
    .sidebar-left .filtro-principal:hover{
      background:#f5f4e2;
    }

    .subfiltros{ display:none; }
    .subfiltros.show{ display:block; }

    .sidebar-left .subfiltro-btn{
      width:100%;
      padding:4px 15px;
      text-align:left;
      border:none;
      background:none;
      cursor:pointer;
      font-size:10px;
      line-height:1.4;
      color:#555;
      font-weight:500;
    }
    .sidebar-left .subfiltro-btn:hover{
      background:#f5f4e2;
    }
    .sidebar-left .subfiltro-btn.active{
      background:#3e5c3a;
      color:#f5f4c7;
    }

    .left-actions{
      margin-top:auto;
      padding:12px;
      border-top:1px solid #eee;
      background:#fafafa;
      position:sticky;
      bottom:0;
    }

    .open-panel-btn{
      width:100%;
      padding:10px 12px;
      background:#3e5c3a;
      color:#fff;
      border:none;
      border-radius:4px;
      cursor:pointer;
      font-size:11px;
      font-weight:600;
      transition: background 0.2s ease;
    }
    .open-panel-btn:hover{ 
      background:#546d4d;
    }

    /* ---------- MAIN AREA ---------- */
    .main{ flex:1; overflow:hidden; position:relative; }
    .frame-container{ width:100%; height:100%; background:#fff; }
    iframe{ width:100%; height:100%; border:none; }

    /* ---------- RIGHT PANEL ---------- */
    .sidebar-right{
      position:fixed;
      top:0;
      right:0;
      width:280px;
      height:100%;
      background:#fff;
      border-left:1px solid #ccc;
      padding:15px;
      display:flex;
      flex-direction:column;
      gap:10px;
      transition:transform .25s ease;
      z-index:20;
      transform: translateX(0);
    }
    .sidebar-right.hidden{ transform:translateX(100%); }
    .sidebar-right h2{ font-size:18px; font-weight:600; }
    .sidebar-right input{ width:100%; padding:8px; border:1px solid #aaa; border-radius:4px; font-size:14px; }
    .sidebar-right .actions{ display:flex; gap:8px; }
    .btn-primary{ background:#007bff; color:#fff; border:none; padding:10px; border-radius:4px; cursor:pointer; flex:1; font-size:14px; font-weight:600; }
    .btn-ghost{ background:#f1f1f1; border:none; padding:10px; border-radius:4px; cursor:pointer; flex:1; font-size:14px; font-weight:600; }
  </style>
</head>
<body>

  <div class="sidebar-left">
    <h2>Filtros</h2>

    <!-- √ÅREA CONTROL DE GESTI√ìN -->
    <div class="filtro">
      <div class="filtro-principal" onclick="toggleSubfiltros('gestion')">√ÅREA CONTROL DE GESTI√ìN</div>
      <div id="gestion" class="subfiltros">
        <button class="subfiltro-btn" onclick="cambiarHoja('costos_palto')">Control de costos palto</button>
      </div>
    </div>

    <!-- SANIDAD VEGETAL PALTO -->
    <div class="filtro">
      <div class="filtro-principal" onclick="toggleSubfiltros('sanidad')">SANIDAD VEGETAL PALTO</div>
      <div id="sanidad" class="subfiltros show">
        <button class="subfiltro-btn active" onclick="cambiarHoja('temperaturas')">Temperaturas</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('kri')">KRI Fitosanitario Plagas</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('fitosanitario')">Fitosanitario Plagas</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('fruta')">Fruta Pre Cosecha</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('malezas')">Reporte Malezas</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('ramas')">Ramas Secas &amp; 100%</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('aplicaciones')">Seguimiento Aplicaciones</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('mosca')">Mosca Siprivi</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('mtd')">Reporte MTD</button>
      </div>
    </div>

    <!-- FERTIRRIEGO Y NUTRICI√ìN -->
    <div class="filtro">
      <div class="filtro-principal" onclick="toggleSubfiltros('fertirriego')">FERTIRRIEGO Y NUTRICI√ìN</div>
      <div id="fertirriego" class="subfiltros">
        <button class="subfiltro-btn" onclick="cambiarHoja('unds')">UNDS NPK Cumplimiento Mes</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('phce')">Resultados de PH CE</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('turbidez')">Control Turbidez</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('sedimentadores')">Sedimentadores</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('diagnostico')">Diagnostico Nutricional Foliar</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('diagnostico1')">Diagnostico Nutricional Foliar I</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('flor')">Flor Fruto</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('unidades')">Reporte De Unidades Nutrimentales</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('vapor')">D√©ficit De Presi√≥n De Vapor</button>
      </div>
    </div>

    <!-- PRODUCCI√ìN FRUSOL1 -->
    <div class="filtro">
      <div class="filtro-principal" onclick="toggleSubfiltros('produccion')">PRODUCCI√ìN FRUSOL1</div>
      <div id="produccion" class="subfiltros">
        <button class="subfiltro-btn" onclick="cambiarHoja('siembra')">Proyecto Siembra + Biometr√≠a</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('humedad')">Humedad</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('datos_humedad')">Datos Humedad</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('brix')">Grados Brix</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('raices')">Peso Ra√≠ces</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('yemas')">Yemas Fenolog√≠a</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('caida')">Ca√≠da de Fruta + Pintona</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('recojo')">Recojo Fruta</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('desmalezado')">Desmalezado</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('gotero')">Destape Goteros</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('mangueras')">Lavado Mangueras</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('camellones')">Camellones</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('poda')">Poda</button>
      </div>
    </div>

    <!-- PROYECCIONES PCP -->
    <div class="filtro">
      <div class="filtro-principal" onclick="toggleSubfiltros('pcp')">PROYECCIONES PCP</div>
      <div id="pcp" class="subfiltros">
        <button class="subfiltro-btn" onclick="cambiarHoja('area')">√Årea de Proyecci√≥n y Planificaci√≥n</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('jorge')">Jorgue Angulo</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('historial')">PCP Historial Palto</button>
        <button class="subfiltro-btn" onclick="cambiarHoja('cosecha')">PCP Cosecha Palto HASS</button>
      </div>
    </div>

    <div class="left-actions">
      <button class="open-panel-btn" onclick="toggleSidebar()">Insertar URL</button>
    </div>
  </div>

  <div id="main" class="main"></div>

  <div id="sidebarRight" class="sidebar-right hidden">
    <h2>Insertar Frame</h2>
    <input id="urlInput" type="text" placeholder="Pega la URL aqu√≠" />
    <div class="actions">
      <button class="btn-ghost" onclick="toggleSidebar()">Cancelar</button>
      <button class="btn-primary" onclick="insertarFrame()">Insertar</button>
    </div>
  </div>

<script>
  const hojas = {
    costos_palto: [],
    temperaturas: [], kri: [], fitosanitario: [], fruta: [], malezas: [],
    ramas: [], aplicaciones: [], mosca: [], mtd: [],
    unds: [], phce: [], turbidez: [], sedimentadores: [],
    diagnostico: [], diagnostico1: [], flor: [], unidades: [], vapor: [],
    siembra: [], humedad: [], datos_humedad: [], brix: [], raices: [],
    yemas: [], caida: [], recojo: [], desmalezado: [], gotero: [],
    mangueras: [], camellones: [], poda: [],
    area: [], jorge: [], historial: [], cosecha: []
  };

  let hojaActiva = "temperaturas";

  function cambiarHoja(id){
    hojaActiva = id;
    document.querySelectorAll('.subfiltro-btn').forEach(b => b.classList.remove('active'));
    const btn = document.querySelector(`.subfiltro-btn[onclick="cambiarHoja('${id}')"]`);
    if(btn) btn.classList.add('active');
    renderFrames();
  }

  function insertarFrame(){
    const url = document.getElementById('urlInput').value.trim();
    if(!url) return;
    hojas[hojaActiva] = [url]; // Solo en memoria, no se guarda
    document.getElementById('urlInput').value = "";
    renderFrames();
    toggleSidebar();
  }

  function renderFrames(){
    const main = document.getElementById('main');
    main.innerHTML = "";
    if(hojas[hojaActiva] && hojas[hojaActiva].length>0){
      const url = hojas[hojaActiva][0];
      const div = document.createElement('div');
      div.className = 'frame-container';
      div.innerHTML = `<iframe src="${url}" allowfullscreen></iframe>`;
      main.appendChild(div);
    }
  }

  function toggleSidebar(){
    const panel = document.getElementById('sidebarRight');
    panel.classList.toggle('hidden');
    if(!panel.classList.contains('hidden')){
      setTimeout(()=>document.getElementById('urlInput').focus(),50);
    }
  }

  function toggleSubfiltros(id){
    document.getElementById(id).classList.toggle('show');
  }

  // Render inicial
  renderFrames();
</script>
</body>
</html>
